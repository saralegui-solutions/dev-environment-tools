# ========================================
# TMUX RESILIENCE LAYER
# ========================================
# Add this to the END of your ~/.tmux.conf
# Created: 2026-01-15
# Fixes tmux 3.4 segfault crash recovery
# ========================================

# Plugin Manager (TPM)
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Resurrect settings - what to save
set -g @resurrect-capture-pane-contents 'on'     # Save pane scrollback
set -g @resurrect-strategy-nvim 'session'        # Restore neovim sessions
set -g @resurrect-processes 'ssh mosh "~claude"' # Also resurrect these processes

# Continuum settings - automatic saving
set -g @continuum-restore 'on'                   # Auto-restore on tmux start
set -g @continuum-save-interval '5'              # Save every 5 minutes (default 15)
set -g @continuum-boot 'off'                     # Don't auto-start (systemd handles this)

# Status line indicator for continuum
set -g status-right 'Continuum: #{continuum_status} | %H:%M'

# Initialize TPM (MUST be at the very end of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
